{"version":3,"sources":["AlertModal.js","DrawingModal.js","App.js","reportWebVitals.js","index.js"],"names":["AlertModal","_ref","isOpen","onClose","message","link","React","createElement","className","href","target","rel","onClick","DrawingModal","canvasRef","handleCanvasMouseDown","handleCanvasMouseMove","handleCanvasMouseUp","saveDrawing","reimagineDrawing","savedDrawing","useEffect","canvas","current","ctx","getContext","img","Image","src","onload","clearRect","width","height","drawImage","ref","onMouseDown","onMouseMove","onMouseUp","moodLabels","moodEmojis","imageDirectories","imageCounts","getYouTubeVideoId","url","match","length","initializeMoodAnalysis","reduce","acc","label","App","dateList","today","Date","i","date","setDate","getDate","dateString","toISOString","split","push","generateDateList","diaryEntries","setDiaryEntries","useState","entries","description","mood","imageUrl","initializeDiaryEntries","selectedDate","setSelectedDate","prompt","setPrompt","speechResult","setSpeechResult","setMood","setImageUrl","activeInputMode","setActiveInputMode","isDrawingOpen","setIsDrawingOpen","isSpeechOpen","setIsSpeechOpen","selectedMusic","setSelectedMusic","isModalOpen","setIsModalOpen","moodAnalysis","setMoodAnalysis","lastModalShowDate","setLastModalShowDate","isDrawingModalOpen","setIsDrawingModalOpen","setSavedDrawing","drawing","recognitionRef","useRef","isDrawing","isRecording","setIsRecording","updateMoodAnalysis","useCallback","last14Days","slice","newMoodAnalysis","sadnessCount","fearCount","forEach","entry","moodIndex","Math","floor","moodLabel","daysSinceLastModal","currentMusic","moodRange","title","playlistUrl","find","music","handleInputModeChange","mode","stopSpeechRecognition","startSpeechRecognition","window","alert","recognition","webkitSpeechRecognition","lang","interimResults","continuous","onresult","event","transcript","results","prevResult","onerror","console","error","start","stop","map","index","key","_diaryEntries$date","_diaryEntries$date2","_diaryEntries$date3","_diaryEntries$date4","_diaryEntries$date5","prevEntries","handleDateClick","FaKeyboard","FaMicrophone","FaPenFancy","value","onChange","e","placeholder","handleEnter","image","moodValue","min","imageCount","random","getRandomImageForMood","handleClear","alt","emoji","type","max","Number","Object","keys","rect","getBoundingClientRect","scaleX","scaleY","beginPath","moveTo","clientX","left","clientY","top","lineTo","stroke","dataUrl","toDataURL","handleReimagine","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d0f1788d.chunk.js","sourcesContent":["import React from 'react';\nimport './AlertModal.css';\n\nfunction AlertModal({ isOpen, onClose, message, link }) {\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"modal-overlay\">\n            <div className=\"modal-content\">\n                <h2 className=\"modal-title\">Time to Get Some Help!</h2>\n                <p className=\"modal-message\">{message}</p>\n                <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"modal-link\">\n                    Visit a Psychiatrist\n                </a>\n                <button className=\"modal-close-button\" onClick={onClose}>\n                    Close\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default AlertModal;\n\n","import React, { useEffect } from 'react';\n\nfunction DrawingModal({\n  isOpen,\n  onClose,\n  canvasRef,\n  handleCanvasMouseDown,\n  handleCanvasMouseMove,\n  handleCanvasMouseUp,\n  saveDrawing,\n  reimagineDrawing,\n  savedDrawing,\n}) {\n  useEffect(() => {\n    // Load the saved drawing specific to the date if it exists\n    const canvas = canvasRef.current;\n    if (canvas && savedDrawing) {\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = savedDrawing;\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas before loading\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height); // Load the saved image\n      };\n    } else if (canvas) {\n      // Clear the canvas if there's no saved drawing\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  }, [isOpen, savedDrawing]); // Reloads when modal opens or savedDrawing changes\n\n  return (\n    <div className={`drawing-overlay ${isOpen ? 'active' : ''}`}>\n      <div className=\"drawing-modal-content\">\n        <h2>Draw Your Mood</h2>\n        <canvas\n          ref={canvasRef}\n          className=\"drawing-canvas\"\n          width=\"400\"\n          height=\"400\"\n          onMouseDown={handleCanvasMouseDown}\n          onMouseMove={handleCanvasMouseMove}\n          onMouseUp={handleCanvasMouseUp}\n        />\n        <div className=\"drawing-buttons\">\n          <button onClick={saveDrawing}>Save</button>\n          <button onClick={reimagineDrawing}>Re-imagine</button>\n          <button onClick={onClose}>Close</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DrawingModal;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { FaKeyboard, FaMicrophone, FaPenFancy } from 'react-icons/fa';\nimport './App.css';\nimport AlertModal from './AlertModal';\nimport DrawingModal from './DrawingModal';\n\n// Constants\nconst moodLabels = [\"Anger\", \"Neutral\", \"Fear\", \"Sadness\", \"Surprise\", \"Happiness\"];\nconst moodEmojis = [\"😠\", \"😐\", \"😨\", \"😢\", \"😲\", \"😊\"];\nconst imageDirectories = {\n  \"Anger\": \"images/Anger\",\n  \"Neutral\": \"images/Neutral\",\n  \"Fear\": \"images/Fear\",\n  \"Sadness\": \"images/Sadness\",\n  \"Surprise\": \"images/Surprise\",\n  \"Happiness\": \"images/Happiness\"\n};\nconst imageCounts = {\n  \"Anger\": 10,\n  \"Neutral\": 3,\n  \"Fear\": 8,\n  \"Sadness\": 20,\n  \"Surprise\": 8,\n  \"Happiness\": 11\n};\n\n// Define the function to get a random image based on mood\nfunction getRandomImageForMood(moodValue) {\n  let moodIndex = Math.floor((moodValue / 100) * moodLabels.length);\n  moodIndex = moodValue === 100 ? moodLabels.length - 1 : Math.min(moodIndex, moodLabels.length - 1);\n\n  const moodLabel = moodLabels[moodIndex];\n  const directory = imageDirectories[moodLabel];\n  const imageCount = imageCounts[moodLabel] || 1;\n  const randomIndex = Math.floor(Math.random() * imageCount) + 1;\n\n  return `${process.env.PUBLIC_URL}/${directory}/image${randomIndex}.jpg`;\n}\n\n// Define the function to get YouTube video ID\nfunction getYouTubeVideoId(url) {\n  const regExp = /^.*(?:youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n  const match = url.match(regExp);\n  return (match && match[1].length === 11) ? match[1] : null;\n}\n\n// Generate a list of dates for the past 30 days\nfunction generateDateList() {\n  const today = new Date();\n  const dateList = [];\n  for (let i = 0; i <= 30; i++) {\n    const date = new Date(today);\n    date.setDate(today.getDate() - i);\n    const dateString = date.toISOString().split('T')[0];\n    dateList.push(dateString);\n  }\n  return dateList;\n}\n\n// Initialize diary entries\nfunction initializeDiaryEntries(dateList) {\n  return dateList.reduce((entries, date) => {\n    entries[date] = { description: '', mood: 25, imageUrl: null };\n    return entries;\n  }, {});\n}\n\n// Initialize mood analysis\nfunction initializeMoodAnalysis() {\n  return moodLabels.reduce((acc, label) => {\n    acc[label] = 0;\n    return acc;\n  }, {});\n}\n\nfunction App() {\n  const dateList = generateDateList();\n  const [diaryEntries, setDiaryEntries] = useState(initializeDiaryEntries(dateList));\n  const [selectedDate, setSelectedDate] = useState(dateList[0]);\n  const [prompt, setPrompt] = useState(diaryEntries[dateList[0]].description);\n  const [speechResult, setSpeechResult] = useState(diaryEntries[dateList[0]].speechResult);\n  const [mood, setMood] = useState(25);\n  const [imageUrl, setImageUrl] = useState(diaryEntries[dateList[0]].imageUrl);\n  const [activeInputMode, setActiveInputMode] = useState('typing');\n  const [isDrawingOpen, setIsDrawingOpen] = useState(false);\n  const [isSpeechOpen, setIsSpeechOpen] = useState(false);\n  const [selectedMusic, setSelectedMusic] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [moodAnalysis, setMoodAnalysis] = useState(initializeMoodAnalysis());\n  const [lastModalShowDate, setLastModalShowDate] = useState(null);\n  const [isDrawingModalOpen, setIsDrawingModalOpen] = useState(false);\n  const [savedDrawing, setSavedDrawing] = useState(diaryEntries[selectedDate].drawing || null);\n  const recognitionRef = useRef(null);\n  const canvasRef = useRef(null);\n  const isDrawing = useRef(false);\n  const [isRecording, setIsRecording] = useState(false); \n\n  // Wrap updateMoodAnalysis in useCallback\n  const updateMoodAnalysis = useCallback(() => {\n    const last14Days = dateList.slice(0, 14);\n    const newMoodAnalysis = initializeMoodAnalysis();\n\n    let sadnessCount = 0;\n    let fearCount = 0;\n\n    last14Days.forEach((date) => {\n      const entry = diaryEntries[date];\n      if (entry && entry.mood !== null) {\n        const moodIndex = Math.floor(entry.mood / (100 / moodLabels.length));\n        const moodLabel = moodLabels[moodIndex];\n        if (moodLabel) {\n          newMoodAnalysis[moodLabel] += 1;\n\n          if (moodLabel === \"Sadness\") {\n            sadnessCount += 1;\n          } else if (moodLabel === \"Fear\") {\n            fearCount += 1;\n          }\n        }\n      }\n    });\n\n    setMoodAnalysis(newMoodAnalysis);\n\n    const today = new Date();\n    const daysSinceLastModal = lastModalShowDate\n      ? Math.floor((today - lastModalShowDate) / (1000 * 60 * 60 * 24))\n      : 8;\n\n    if ((sadnessCount > 7 || fearCount > 7) && daysSinceLastModal >= 7) {\n      setIsModalOpen(true);\n      setLastModalShowDate(new Date());\n    }\n  }, [dateList, diaryEntries, lastModalShowDate]);\n\n  useEffect(() => {\n    updateMoodAnalysis();\n  }, [diaryEntries, updateMoodAnalysis]);\n\n  useEffect(() => {\n    const musicSuggestions = [\n      { moodRange: [0, 16], title: \"Angry Music\", playlistUrl: \"https://www.youtube.com/watch?v=r8OipmKFDeM\" },\n      { moodRange: [17, 33], title: \"Neutral Music\", playlistUrl: \"https://www.youtube.com/watch?v=CFGLoQIhmow&t=2486s\" },\n      { moodRange: [34, 50], title: \"Fear Music\", playlistUrl: \"https://www.youtube.com/watch?v=P_tsPLT0irs\" },\n      { moodRange: [51, 67], title: \"Sad Music\", playlistUrl: \"https://www.youtube.com/watch?v=A_MjCqQoLLA\" },\n      { moodRange: [68, 84], title: \"Surprise Music\", playlistUrl: \"https://www.youtube.com/watch?v=HQmmM_qwG4k&t=2s\" },\n      { moodRange: [85, 100], title: \"Happy Music\", playlistUrl: \"https://www.youtube.com/watch?v=ZbZSe6N_BXs\" },\n    ];\n\n    const currentMusic = musicSuggestions.find(\n      (music) => mood >= music.moodRange[0] && mood <= music.moodRange[1]\n    );\n    setSelectedMusic(currentMusic);\n  }, [mood]);\n\n  const handleClear = () => {\n    if (activeInputMode === 'typing') {\n      setPrompt('');\n    } else if (activeInputMode === 'speech') {\n      setSpeechResult('');\n    }\n  };\n\n  const handleDateClick = (date) => {\n    setDiaryEntries((prevEntries) => ({\n      ...prevEntries,\n      [selectedDate]: {\n        ...prevEntries[selectedDate],\n        description: prompt,\n        mood: mood,\n        imageUrl: imageUrl,\n        drawing: savedDrawing,\n        speechResult: speechResult,\n      },\n    }));\n\n    setSelectedDate(date);\n    setPrompt(diaryEntries[date]?.description || '');\n    setMood(diaryEntries[date]?.mood || 25);\n    setImageUrl(diaryEntries[date]?.imageUrl || null);\n    setSavedDrawing(diaryEntries[date]?.drawing || null);\n    setSpeechResult(diaryEntries[date]?.speechResult || ''); \n  };\n\n  const handleEnter = () => {\n    if (activeInputMode === 'speech') {\n      if (isRecording) {\n        stopSpeechRecognition();\n        setDiaryEntries((prevEntries) => ({\n          ...prevEntries,\n          [selectedDate]: {\n            ...prevEntries[selectedDate],\n            speechResult: speechResult, // Save speech result for the selected date\n          },\n        }));\n        alert('Recording stopped and entry saved successfully!');\n      } else {\n        startSpeechRecognition();\n        alert('Recording started...');\n      }\n    } else{\n    const image = getRandomImageForMood(mood);\n    setImageUrl(image);\n\n    setDiaryEntries((prevEntries) => ({\n      ...prevEntries,\n      [selectedDate]: {\n        description: prompt,\n        mood: mood,\n        imageUrl: image,\n        speechResult: speechResult,\n      },\n    }));\n    alert('Entry saved successfully!');\n    }\n  };\n\n  const handleInputModeChange = (mode) => {\n    setActiveInputMode(mode);\n    if (isRecording) {\n      stopSpeechRecognition(); \n    }\n\n    setActiveInputMode(mode);\n\n    if (mode === 'speech') {\n      setIsSpeechOpen(true);\n      startSpeechRecognition();\n    } else {\n      stopSpeechRecognition();\n      setIsSpeechOpen(false);\n    }\n\n    if (mode === 'draw') {\n      setIsDrawingModalOpen(true);\n    } else {\n      setIsDrawingModalOpen(false);\n    }\n  };\n\n  const clearResults = () => {\n    setPrompt('');\n    setSpeechResult('');\n  };\n\n  const startSpeechRecognition = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert('Speech recognition is not supported in this browser.');\n      return;\n    }\n\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'en-US';\n    recognition.interimResults = true;\n    recognition.continuous = true;\n    recognitionRef.current = recognition;\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[event.results.length - 1][0].transcript;\n      setSpeechResult((prevResult) => prevResult + ' ' + transcript);\n    };\n\n    recognition.onerror = (event) => {\n      console.error('Speech recognition error:', event.error);\n    };\n\n    recognition.start();\n    setIsRecording(true);\n  };\n\n  const stopSpeechRecognition = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  const handleCanvasMouseDown = (e) => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ctx = canvas.getContext('2d');\n      const rect = canvas.getBoundingClientRect();\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n\n      ctx.beginPath();\n      ctx.moveTo(\n        (e.clientX - rect.left) * scaleX,\n        (e.clientY - rect.top) * scaleY\n      );\n      isDrawing.current = true;\n    }\n  };\n\n  const handleCanvasMouseMove = (e) => {\n    if (!isDrawing.current) return;\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ctx = canvas.getContext('2d');\n      const rect = canvas.getBoundingClientRect();\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n\n      ctx.lineTo(\n        (e.clientX - rect.left) * scaleX,\n        (e.clientY - rect.top) * scaleY\n      );\n      ctx.stroke();\n    }\n  };\n\n  const handleCanvasMouseUp = () => {\n    isDrawing.current = false;\n  };\n\n  const saveDrawing = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const dataUrl = canvas.toDataURL(); // Convert canvas to base64 image data\n      setSavedDrawing(dataUrl); // Store the image data for the selected date\n      setDiaryEntries((prevEntries) => ({\n        ...prevEntries,\n        [selectedDate]: {\n          ...prevEntries[selectedDate],\n          drawing: dataUrl,\n        },\n      }));\n      alert('Drawing saved successfully!');\n    }\n    setIsDrawingOpen(false); // Close the drawing modal after saving\n  };\n\n  const handleReimagine = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ctx = canvas.getContext('2d');\n      // Clear the entire canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  \n    // Reset the savedDrawing state to clear the drawing in the state\n    setSavedDrawing(null);\n    setDiaryEntries((prevEntries) => ({\n      ...prevEntries,\n      [selectedDate]: {\n        ...prevEntries[selectedDate],\n        drawing: null,\n      },\n    }));\n    alert('The drawing has been cleared for re-imagining!');\n  };\n  \n  \n  return (\n    <div className=\"app-layout\">\n      <div className=\"sidebar\">\n        <h2 className=\"sidebar-title\">Diary AI</h2>\n        <ul className=\"diary-list\">\n          {dateList.map((date, index) => (\n            <li\n              key={date}\n              className={`diary-item ${date === selectedDate ? 'active' : ''}`}\n              onClick={() => handleDateClick(date)}\n            >\n              {index === 0 ? 'Today' : date}\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      <div className=\"main-content\">\n        <h1 className=\"main-title\">{selectedDate}'s Mood</h1>\n        <div className=\"input-icons\">\n          <FaKeyboard\n            className={`input-icon ${activeInputMode === 'typing' ? 'active' : ''}`}\n            title=\"Type\"\n            onClick={() => handleInputModeChange('typing')}\n          />\n          <FaMicrophone\n            className={`input-icon ${activeInputMode === 'speech' ? 'active' : ''}`}\n            title=\"Voice to Text\"\n            onClick={() => handleInputModeChange('speech')}\n          />\n          <FaPenFancy\n            className={`input-icon ${activeInputMode === 'draw' ? 'active' : ''}`}\n            title=\"Draw\"\n            onClick={() => {\n              handleInputModeChange('draw');\n              setIsDrawingModalOpen(true);\n            }}\n          />\n        </div>\n\n        {activeInputMode === 'typing' && (\n          <textarea\n            className=\"description-input\"\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            placeholder=\"Write your description here...\"\n          />\n        )}\n\n        {activeInputMode === 'speech' && (\n          <div className=\"speech-result\">\n            <h3>Speech-to-Text Result</h3>\n            <p>{speechResult}</p>\n          </div>\n        )}\n        <div className=\"button-container\">\n          <button className=\"button enter-button\" onClick={handleEnter}>\n            Enter\n          </button>\n\n          <button className=\"button clear-button\" onClick={handleClear}>\n              Clear\n          </button>\n        </div>\n        \n        <div className=\"image-display\">\n          {imageUrl ? (\n            <img src={imageUrl} alt=\"Mood\" className=\"generated-image\" />\n          ) : (\n            <div className=\"placeholder\">Your image will appear here</div>\n          )}\n        </div>\n\n        <div className=\"mood-slider-container\">\n          <div className=\"mood-emojis\">\n            {moodEmojis.map((emoji, index) => (\n              <span key={index} className=\"mood-emoji\">\n                {emoji}\n              </span>\n            ))}\n          </div>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            value={mood}\n            className=\"mood-slider\"\n            onChange={(e) => setMood(Number(e.target.value))}\n          />\n        </div>\n\n        {selectedMusic && (\n          <div className=\"music-suggestion\">\n            <h3>Suggested Playlist:</h3>\n            <a href={selectedMusic.playlistUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img\n                src={`https://img.youtube.com/vi/${getYouTubeVideoId(selectedMusic.playlistUrl)}/hqdefault.jpg`}\n                alt={`${selectedMusic.title} playlist`}\n                className=\"music-thumbnail\"\n              />\n            </a>\n          </div>\n        )}\n\n        <div className=\"mood-analysis\">\n          <h3>Past 14 Days Mood Analysis</h3>\n          <ul>\n            {Object.keys(moodAnalysis).map((mood, index) => (\n              <li key={mood}>\n                {moodLabels[index]} {moodEmojis[index]}: {moodAnalysis[mood]}\n              </li>\n            ))}\n          </ul>\n        </div>\n\n        <AlertModal\n          isOpen={isModalOpen}\n          onClose={() => setIsModalOpen(false)}\n          message=\"It seems that you've been feeling fear or sadness for more than 7 days in the past two weeks. Consider talking to a psychiatrist.\"\n          link=\"https://www.google.com/search?q=%E5%BF%83%E7%90%86%E9%86%AB%E7%94%9F\"\n        />\n      </div>\n\n      {/* Add DrawingModal here */}\n      <DrawingModal\n        isOpen={isDrawingModalOpen}\n        onClose={() => setIsDrawingModalOpen(false)}\n        canvasRef={canvasRef}\n        handleCanvasMouseDown={handleCanvasMouseDown}\n        handleCanvasMouseMove={handleCanvasMouseMove}\n        handleCanvasMouseUp={handleCanvasMouseUp}\n        saveDrawing={saveDrawing}\n        reimagineDrawing={handleReimagine}\n        savedDrawing={savedDrawing} // Pass the saved drawing to the modal\n      />\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\nreportWebVitals();\n\n"],"sourceRoot":""}