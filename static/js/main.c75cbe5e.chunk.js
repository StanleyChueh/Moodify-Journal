(this["webpackJsonpdiary-image-app"]=this["webpackJsonpdiary-image-app"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a(16)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(3),o=a.n(s),r=(a(12),a(1));a(13),a(14);var c=function(e){let{isOpen:t,onClose:a,message:n,link:s}=e;return t?l.a.createElement("div",{className:"modal-overlay"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h2",{className:"modal-title"},"Time to Get Some Help!"),l.a.createElement("p",{className:"modal-message"},n),l.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"modal-link"},"Visit a Psychiatrist"),l.a.createElement("button",{className:"modal-close-button",onClick:a},"Close"))):null};a(15);var i=e=>{let{isOpen:t,onClose:a,canvasRef:n,handleCanvasMouseDown:s,handleCanvasMouseMove:o,handleCanvasMouseUp:r,clearCanvas:c,saveDrawing:i}=e;return t?l.a.createElement("div",{className:"drawing-modal-overlay"},l.a.createElement("div",{className:"drawing-modal"},l.a.createElement("h2",null,"Draw Your Mood"),l.a.createElement("canvas",{ref:n,className:"drawing-canvas",width:500,height:300,onMouseDown:s,onMouseMove:o,onMouseUp:r}),l.a.createElement("div",{className:"drawing-modal-buttons"},l.a.createElement("button",{onClick:i},"Save"),l.a.createElement("button",{onClick:c},"Re-imagine"),l.a.createElement("button",{onClick:a},"Close")))):null};const m=["Anger","Neutral","Fear","Sadness","Surprise","Happiness"],u={Anger:"images/Anger",Neutral:"images/Neutral",Fear:"images/Fear",Sadness:"images/Sadness",Surprise:"images/Surprise",Happiness:"images/Happiness"},d={Anger:10,Neutral:3,Fear:8,Sadness:20,Surprise:8,Happiness:11};function p(e){const t=e.match(/^.*(?:youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[1].length?t[1]:null}function g(){return m.reduce((e,t)=>(e[t]=0,e),{})}var h=function(){const e=function(){const e=new Date,t=[];for(let a=0;a<=30;a++){const n=new Date(e);n.setDate(e.getDate()-a);const l=n.toISOString().split("T")[0];t.push(l)}return t}(),[t,a]=Object(n.useState)(function(e){return e.reduce((e,t)=>(e[t]={description:"",mood:25,imageUrl:null},e),{})}(e)),[s,o]=Object(n.useState)(e[0]),[h,v]=Object(n.useState)(t[e[0]].description),[w,E]=Object(n.useState)(""),[b,y]=Object(n.useState)(25),[f,N]=Object(n.useState)(t[e[0]].imageUrl),[S,C]=Object(n.useState)("typing"),[M,k]=Object(n.useState)(!1),[O,j]=Object(n.useState)(!1),[R,D]=Object(n.useState)(null),[U,F]=Object(n.useState)(!1),[T,A]=Object(n.useState)(g()),[P,x]=Object(n.useState)(null),[B,H]=Object(n.useState)(!1),[I,L]=Object(n.useState)(null),_=Object(n.useRef)(null),q=Object(n.useRef)(null),Y=Object(n.useRef)(!1),G=Object(n.useCallback)(()=>{const a=e.slice(0,14),n=g();let l=0,s=0;a.forEach(e=>{const a=t[e];if(a&&null!==a.mood){const e=Math.floor(a.mood/(100/m.length)),t=m[e];t&&(n[t]+=1,"Sadness"===t?l+=1:"Fear"===t&&(s+=1))}}),A(n);const o=new Date,r=P?Math.floor((o-P)/864e5):8;(l>7||s>7)&&r>=7&&(F(!0),x(new Date))},[e,t,P]);Object(n.useEffect)(()=>{G()},[t,G]),Object(n.useEffect)(()=>{const e=[{moodRange:[0,16],title:"Angry Music",playlistUrl:"https://www.youtube.com/watch?v=r8OipmKFDeM"},{moodRange:[17,33],title:"Neutral Music",playlistUrl:"https://www.youtube.com/watch?v=CFGLoQIhmow&t=2486s"},{moodRange:[34,50],title:"Fear Music",playlistUrl:"https://www.youtube.com/watch?v=P_tsPLT0irs"},{moodRange:[51,67],title:"Sad Music",playlistUrl:"https://www.youtube.com/watch?v=A_MjCqQoLLA"},{moodRange:[68,84],title:"Surprise Music",playlistUrl:"https://www.youtube.com/watch?v=HQmmM_qwG4k&t=2s"},{moodRange:[85,100],title:"Happy Music",playlistUrl:"https://www.youtube.com/watch?v=ZbZSe6N_BXs"}].find(e=>b>=e.moodRange[0]&&b<=e.moodRange[1]);D(e)},[b]);const J=e=>{S!==e&&Q(),C(e),"speech"===e?(j(!0),X()):($(),j(!1)),H("draw"===e)},Q=()=>{v(""),E("")},X=()=>{if(!("webkitSpeechRecognition"in window))return void alert("Speech recognition is not supported in this browser.");const e=new window.webkitSpeechRecognition;e.lang="en-US",e.interimResults=!0,e.continuous=!0,_.current=e,e.onresult=e=>{const t=e.results[e.results.length-1][0].transcript;E(e=>e+" "+t)},e.onerror=e=>{console.error("Speech recognition error:",e.error)},e.start()},$=()=>{_.current&&_.current.stop()};return l.a.createElement("div",{className:"app-layout"},l.a.createElement("div",{className:"sidebar"},l.a.createElement("h2",{className:"sidebar-title"},"Diary AI"),l.a.createElement("ul",{className:"diary-list"},e.map((e,n)=>l.a.createElement("li",{key:e,className:"diary-item "+(e===s?"active":""),onClick:()=>(e=>{var n,l,r;a(e=>({...e,[s]:{description:h,mood:b,imageUrl:f}})),o(e),v((null===(n=t[e])||void 0===n?void 0:n.description)||""),y((null===(l=t[e])||void 0===l?void 0:l.mood)||25),N((null===(r=t[e])||void 0===r?void 0:r.imageUrl)||null)})(e)},0===n?"Today":e)))),l.a.createElement("div",{className:"main-content"},l.a.createElement("h1",{className:"main-title"},s,"'s Mood"),l.a.createElement("div",{className:"input-icons"},l.a.createElement(r.a,{className:"input-icon "+("typing"===S?"active":""),title:"Type",onClick:()=>J("typing")}),l.a.createElement(r.b,{className:"input-icon "+("speech"===S?"active":""),title:"Voice to Text",onClick:()=>J("speech")}),l.a.createElement(r.c,{className:"input-icon "+("draw"===S?"active":""),title:"Draw",onClick:()=>{J("draw"),H(!0)}})),"typing"===S&&l.a.createElement("textarea",{className:"description-input",value:h,onChange:e=>v(e.target.value),placeholder:"Write your description here..."}),"speech"===S&&l.a.createElement("div",{className:"speech-result"},l.a.createElement("h3",null,"Speech-to-Text Result"),l.a.createElement("p",null,w)),l.a.createElement("button",{className:"generate-button",onClick:()=>{const e=function(e){let t=Math.floor(e/100*m.length);t=100===e?m.length-1:Math.min(t,m.length-1);const a=m[t],n=d[a]||1;return`/Moodify-Journal/${u[a]}/image${Math.floor(Math.random()*n)+1}.jpg`}(b);N(e),a(t=>({...t,[s]:{description:h,mood:b,imageUrl:e}})),alert("Entry saved successfully!")}},"Enter"),l.a.createElement("div",{className:"image-display"},f?l.a.createElement("img",{src:f,alt:"Mood",className:"generated-image"}):l.a.createElement("div",{className:"placeholder"},"Your image will appear here")),l.a.createElement("div",{className:"mood-slider-container"},l.a.createElement("div",{className:"mood-labels"},m.map(e=>l.a.createElement("span",{key:e,className:"mood-label"},e))),l.a.createElement("input",{type:"range",min:"0",max:"100",value:b,className:"mood-slider",onChange:e=>y(Number(e.target.value))}),l.a.createElement("div",{className:"mood-value"},"Mood: ",b)),R&&l.a.createElement("div",{className:"music-suggestion"},l.a.createElement("h3",null,"Suggested Playlist: ",R.title),l.a.createElement("a",{href:R.playlistUrl,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:`https://img.youtube.com/vi/${p(R.playlistUrl)}/hqdefault.jpg`,alt:R.title+" playlist",className:"music-thumbnail"}))),l.a.createElement("div",{className:"mood-analysis"},l.a.createElement("h3",null,"Past 14 Days Mood Analysis"),l.a.createElement("ul",null,Object.keys(T).map(e=>l.a.createElement("li",{key:e},e,": ",T[e])))),l.a.createElement(c,{isOpen:U,onClose:()=>F(!1),message:"It seems that you've been feeling fear or sadness for more than 7 days in the past two weeks. Consider talking to a psychiatrist.",link:"https://www.google.com/search?q=%E5%BF%83%E7%90%86%E9%86%AB%E7%94%9F"}),O&&l.a.createElement("div",{className:"popup-overlay"},l.a.createElement("div",{className:"popup-content"},l.a.createElement("h2",null,"Speak now..."),l.a.createElement("button",{onClick:$},"Stop")))),l.a.createElement(i,{isOpen:B,onClose:()=>H(!1),canvasRef:q,handleCanvasMouseDown:e=>{const t=q.current;if(t){const a=t.getContext("2d"),n=t.getBoundingClientRect(),l=t.width/n.width,s=t.height/n.height;a.beginPath(),a.moveTo((e.clientX-n.left)*l,(e.clientY-n.top)*s),Y.current=!0}},handleCanvasMouseMove:e=>{if(!Y.current)return;const t=q.current;if(t){const a=t.getContext("2d"),n=t.getBoundingClientRect(),l=t.width/n.width,s=t.height/n.height;a.lineTo((e.clientX-n.left)*l,(e.clientY-n.top)*s),a.stroke()}},handleCanvasMouseUp:()=>{Y.current=!1},saveDrawing:()=>{(()=>{const e=q.current;if(e){const t=e.toDataURL();L(t),alert("Drawing saved successfully!")}k(!1)})(),H(!1)},reimagineDrawing:()=>{I?(N(I),alert("Image re-imagined based on your drawing!")):alert("No saved drawing to re-imagine.")}}))};var v=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:s,getTTFB:o}=t;a(e),n(e),l(e),s(e),o(e)})};o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(h,null)),document.getElementById("root")),v()}],[[4,1,2]]]);
//# sourceMappingURL=main.c75cbe5e.chunk.js.map